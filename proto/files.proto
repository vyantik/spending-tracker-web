syntax = "proto3";

package files;

service FilesService {
  rpc UploadAvatar (UploadAvatarRequest) returns (UploadAvatarResponse);
  rpc GetAvatar (GetAvatarRequest) returns (GetAvatarResponse);
  rpc GenerateTransactionsExcel (GenerateTransactionsExcelRequest) returns (GenerateTransactionsExcelResponse);
}

message UploadAvatarRequest {
  bytes file = 1;
  optional string old_filename = 2;
}

message UploadAvatarResponse {
  string filename = 1;
}

message GetAvatarRequest {
  string filename = 1;
}

message GetAvatarResponse {
  bytes file = 1;
}

message GenerateTransactionsExcelRequest {
  repeated TransactionData transactions = 1;
  string bankId = 2;
}

message TransactionData {
  string id = 1;
  double amount = 2;
  string description = 3;
  string type = 4;
  optional string category = 5;
  optional string depositType = 6;
  int64 createdAt = 7;
}

message GenerateTransactionsExcelResponse {
  bytes file = 1;
  string filename = 2;
}
